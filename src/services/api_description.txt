Wishlist API Description
1ï¸âƒ£ Add product to wishlist

API: POST /api/wishlist

Description:
ThÃªm má»™t sáº£n pháº©m vÃ o danh sÃ¡ch yÃªu thÃ­ch (wishlist) cá»§a ngÆ°á»i dÃ¹ng hiá»‡n táº¡i.

Náº¿u ngÆ°á»i dÃ¹ng chÆ°a cÃ³ wishlist, há»‡ thá»‘ng sáº½ tá»± Ä‘á»™ng táº¡o má»›i.

Náº¿u sáº£n pháº©m Ä‘Ã£ tá»“n táº¡i trong wishlist, API sáº½ tráº£ vá» lá»—i.

Authentication:
âœ” YÃªu cáº§u Ä‘Äƒng nháº­p (JWT â€“ req.user.id)

Request Body:

{
  "productId": "string"
}


Response â€“ Success (200):

{
  "message": "Product added to wishlist",
  "data": {
    "_id": "wishlistId",
    "userId": "userId",
    "items": [
      {
        "productId": {
          "_id": "productId",
          "title": "Product title",
          "brand": "Brand name",
          "description": "Product description",
          "images": []
        },
        "addedAt": "2026-01-13T10:00:00.000Z"
      }
    ]
  }
}


Response â€“ Error:

404 â€“ Product not found

400 â€“ Product already in wishlist

500 â€“ Server error

2ï¸âƒ£ Get wishlist

API: GET /api/wishlist

Description:
Láº¥y danh sÃ¡ch sáº£n pháº©m trong wishlist cá»§a ngÆ°á»i dÃ¹ng.

Má»—i sáº£n pháº©m tráº£ vá» áº£nh vÃ  giÃ¡ cá»§a variant Ä‘áº§u tiÃªn.

Tá»± Ä‘á»™ng loáº¡i bá» sáº£n pháº©m Ä‘Ã£ bá»‹ xÃ³a khá»i há»‡ thá»‘ng.

Authentication:
âœ” YÃªu cáº§u Ä‘Äƒng nháº­p

Response â€“ Success (200):

{
  "success": true,
  "data": [
    {
      "wishlistItemId": "itemId",
      "productId": "productId",
      "title": "Product title",
      "brand": "Brand name",
      "image": "image_url",
      "price": 199000,
      "addedAt": "2026-01-13T10:00:00.000Z"
    }
  ]
}


Response â€“ Empty Wishlist (200):

{
  "success": true,
  "data": []
}


Response â€“ Error:

500 â€“ Failed to fetch wishlist

3ï¸âƒ£ Check product in wishlist

API: GET /api/wishlist/check/:productId

Description:
Kiá»ƒm tra xem má»™t sáº£n pháº©m cÃ³ tá»“n táº¡i trong wishlist cá»§a ngÆ°á»i dÃ¹ng hay khÃ´ng.
API nÃ y thÆ°á»ng Ä‘Æ°á»£c dÃ¹ng Ä‘á»ƒ:

Hiá»ƒn thá»‹ tráº¡ng thÃ¡i â€œâ¤ï¸ ÄÃ£ yÃªu thÃ­châ€

Disable nÃºt thÃªm wishlist á»Ÿ frontend

Authentication:
âœ” YÃªu cáº§u Ä‘Äƒng nháº­p

URL Params:

productId: string


Response â€“ Success (200):

{
  "exists": true
}

4ï¸âƒ£ Remove product from wishlist

API: DELETE /api/wishlist/:productId

Description:
XÃ³a má»™t sáº£n pháº©m khá»i wishlist cá»§a ngÆ°á»i dÃ¹ng báº±ng $pull trong MongoDB.

Authentication:
âœ” YÃªu cáº§u Ä‘Äƒng nháº­p

URL Params:

productId: string


Response â€“ Success (200):

{
  "message": "Product removed from wishlist successfully"
}


Response â€“ Error:

400 â€“ Invalid Product ID

404 â€“ Product not found in wishlist

500 â€“ Server error

5ï¸âƒ£ Clear wishlist

API: DELETE /api/wishlist

Description:
XÃ³a toÃ n bá»™ sáº£n pháº©m trong wishlist cá»§a ngÆ°á»i dÃ¹ng (lÃ m rá»—ng máº£ng items).

Authentication:
âœ” YÃªu cáº§u Ä‘Äƒng nháº­p

Response â€“ Success (200):

{
  "message": "Wishlist cleared successfully",
  "data": []
}


Response â€“ Error:

404 â€“ Wishlist not found

500 â€“ Server error

ğŸ”’ Notes & Constraints

Má»—i ngÆ°á»i dÃ¹ng chá»‰ cÃ³ má»™t wishlist duy nháº¥t.

Má»—i sáº£n pháº©m chá»‰ Ä‘Æ°á»£c thÃªm má»™t láº§n vÃ o wishlist.

Dá»¯ liá»‡u sáº£n pháº©m Ä‘Æ°á»£c láº¥y thÃ´ng qua populate tá»« ProductModel.

GiÃ¡ vÃ  áº£nh hiá»ƒn thá»‹ dá»±a trÃªn variant Ä‘áº§u tiÃªn cá»§a sáº£n pháº©m.






Product API Description
1ï¸âƒ£ Add Product

API: POST /api/products

Description:
Táº¡o má»›i má»™t sáº£n pháº©m trong há»‡ thá»‘ng.

Kiá»ƒm tra categoryId cÃ³ tá»“n táº¡i hay khÃ´ng

LÆ°u sáº£n pháº©m kÃ¨m variants

XÃ³a cache danh sÃ¡ch sáº£n pháº©m

Gá»­i notification cho ngÆ°á»i táº¡o sáº£n pháº©m

Authentication:
âœ” YÃªu cáº§u Ä‘Äƒng nháº­p (JWT)

Request Body:

{
  "title": "string",
  "brand": "string",
  "description": "string",
  "descriptionDetail": "string",
  "specifications": {},
  "variants": [],
  "categoryId": "string",
  "isHide": 0,
  "rating": 5
}


Response â€“ Success (201):

{
  "success": true,
  "message": "Add product successfully",
  "data": {
    "_id": "productId",
    "title": "Product title",
    "brand": "Brand name",
    "categoryId": "categoryId",
    "variants": []
  }
}


Response â€“ Error:

400 â€“ Category does not exist

409 â€“ SKU already exists in another product variant

500 â€“ Internal Server Error

2ï¸âƒ£ Get All Products

API: GET /api/products

Description:
Láº¥y danh sÃ¡ch sáº£n pháº©m cÃ´ng khai (isHide = PUBLIC) kÃ¨m phÃ¢n trang, lá»c vÃ  sáº¯p xáº¿p.

Há»— trá»£ cache Redis

Lá»c theo category

Lá»c theo khoáº£ng giÃ¡

Sáº¯p xáº¿p theo giÃ¡ tÄƒng / giáº£m

Query Parameters:

page       : number (optional)
sort       : PRICE_ASC | PRICE_DESC (optional)
idCategory : string (optional)
minPrice  : number (optional)
maxPrice  : number (optional)


Response â€“ Success (200):

{
  "data": [
    {
      "_id": "productId",
      "title": "Product title",
      "salePricePre": 199000
    }
  ],
  "pagination": {
    "page": 1,
    "limit": 20,
    "total": 100,
    "totalPages": 5
  }
}


Response â€“ Error:

400 â€“ Invalid page number / Invalid category id

500 â€“ Failed to fetch products

3ï¸âƒ£ Get Product By ID

API: GET /api/products/:id

Description:
Láº¥y chi tiáº¿t má»™t sáº£n pháº©m theo ID.

Chá»‰ tráº£ vá» sáº£n pháº©m á»Ÿ tráº¡ng thÃ¡i PUBLIC

URL Params:

id: string


Response â€“ Success (200):

{
  "_id": "productId",
  "title": "Product title",
  "brand": "Brand name",
  "variants": []
}


Response â€“ Error:

400 â€“ Invalid product id

404 â€“ Product not found

500 â€“ Failed to fetch product

4ï¸âƒ£ Update Product

API: PUT /api/products/:id

Description:
Cáº­p nháº­t thÃ´ng tin sáº£n pháº©m.

Cho phÃ©p update linh hoáº¡t cÃ¡c trÆ°á»ng

XÃ³a cache Redis sau khi cáº­p nháº­t

Gá»­i notification cáº­p nháº­t sáº£n pháº©m

Authentication:
âœ” YÃªu cáº§u Ä‘Äƒng nháº­p

URL Params:

id: string


Request Body:
(ToÃ n bá»™ cÃ¡c field cáº§n cáº­p nháº­t)

Response â€“ Success (200):

{
  "_id": "productId",
  "title": "Updated product title",
  "brand": "Updated brand"
}


Response â€“ Error:

400 â€“ Invalid product id

404 â€“ Product not found

500 â€“ Failed to update product

5ï¸âƒ£ Change Product Status

API: PATCH /api/products/:id/status

Description:
Thay Ä‘á»•i tráº¡ng thÃ¡i hiá»ƒn thá»‹ cá»§a sáº£n pháº©m.
CÃ¡c tráº¡ng thÃ¡i há»£p lá»‡:

CREATE

PUBLIC

HIDE

Sau khi cáº­p nháº­t:

XÃ³a cache Redis

Gá»­i notification

Authentication:
âœ” YÃªu cáº§u Ä‘Äƒng nháº­p

URL Params:

id: string


Request Body:

{
  "to": 1
}


Response â€“ Success (200):

{
  "message": "Change status to PUBLIC successfully"
}


Response â€“ Error:

400 â€“ Invalid product id / Invalid status value

404 â€“ Product not found

500 â€“ Failed to change status

ğŸ”’ Notes & Design Decisions

Chá»‰ sáº£n pháº©m á»Ÿ tráº¡ng thÃ¡i PUBLIC má»›i Ä‘Æ°á»£c hiá»ƒn thá»‹ cho ngÆ°á»i dÃ¹ng

Redis cache giÃºp tá»‘i Æ°u truy váº¥n danh sÃ¡ch sáº£n pháº©m

Cache Ä‘Æ°á»£c xÃ³a má»—i khi:

ThÃªm sáº£n pháº©m

Cáº­p nháº­t sáº£n pháº©m

Thay Ä‘á»•i tráº¡ng thÃ¡i sáº£n pháº©m

Notification Ä‘Æ°á»£c gá»­i cho cÃ¡c hÃ nh Ä‘á»™ng quáº£n trá»‹ sáº£n pháº©m